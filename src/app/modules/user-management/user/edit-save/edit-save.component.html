<app-alert #alertComponent>
</app-alert>

<app-modal #modal [modalConfig]="modalConfig">
    <form class="form w-100" [formGroup]="form" novalidate="novalidate">

        <div class="fv-row mb-8">
            <label class="form-label fs-6 fw-bolder text-gray-900">Name</label>
            <input class="form-control bg-transparent" type="text" name="name" formControlName="name" autocomplete="off"
                [ngClass]="{
                'is-invalid': form.controls['name'].invalid,
                'is-valid': form.controls['name'].valid
              }" />
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'required',
                message: 'Name is required',
                control: form.controls['name']
              }"></ng-container>
        </div>

        <div class="fv-row mb-8">
            <label class="form-label fs-6 fw-bolder text-gray-900">Surname</label>
            <input class="form-control bg-transparent" type="text" name="surname" formControlName="surname" autocomplete="off"
                [ngClass]="{
                'is-invalid': form.controls['surname'].invalid,
                'is-valid': form.controls['surname'].valid
              }" />
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'required',
                message: 'Surname is required',
                control: form.controls['surname']
              }"></ng-container>
        </div>

        <div class="fv-row mb-8">
            <label class="form-label fs-6 fw-bolder text-gray-900">Email</label>
            <input class="form-control bg-transparent" type="email" name="email" formControlName="email" autocomplete="off"
                [ngClass]="{
                'is-invalid': form.controls['email'].invalid,
                'is-valid': form.controls['email'].valid
              }" />

              <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'required',
                message: 'E-mail is required',
                control: form.controls['email']
              }"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'email',
                message: 'E-mail is invalid',
                control: form.controls['email']
              }"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'minLength',
                message: 'E-mail should have at least 3 symbols',
                control: form.controls['email']
              }"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'maxLength',
                message: 'E-mail should have maximum 360 symbols',
                control: form.controls['email']
              }"></ng-container>
        </div>

        <div class="fv-row mb-8" *ngIf="form.controls['id'].value == 0">
            <label class="form-label fw-bolder text-gray-900 fs-6">Password</label>
            <input class="form-control bg-transparent" type="password" name="password"
              formControlName="password" autocomplete="off" [ngClass]="{
                'is-invalid': form.controls['password'].invalid,
                'is-valid': form.controls['password'].valid
              }" />
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'required',
                message: 'Password is required',
                control: form.controls['password']
              }"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'minlength',
                message: 'Password should have at least 3 symbols',
                control: form.controls['password']
              }"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'maxLength',
                message: 'Password should have maximum 100 symbols',
                control: form.controls['password']
              }"></ng-container>
          </div>

          <div class="fv-row mb-8" *ngIf="form.controls['id'].value == 0">
            <label class="form-label fw-bolder text-gray-900 fs-6">Confirm Password</label>
            <input class="form-control bg-transparent" type="password" name="cPassword"
              autocomplete="off" formControlName="cPassword" [ngClass]="{
                'is-invalid': form.controls['cPassword'].invalid,
                'is-valid': form.controls['cPassword'].valid
              }" />
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'required',
                message: 'Confirm Password is required',
                control: form.controls['cPassword']
              }"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'minlength',
                message: 'Confirm Password should have at least 3 symbols',
                control: form.controls['cPassword']
              }"></ng-container>
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'maxLength',
                message: 'Confirm Password should have maximum 100 symbols',
                control: form.controls['cPassword']
              }"></ng-container>
            <ng-container *ngIf="
            form.controls['cPassword'].errors &&
                form.controls['cPassword'].errors.ConfirmPassword
              ">
              <div class="fv-plugins-message-container">
                <div class="fv-help-block">
                  'Passsword' and 'Confirm Password' didn't match.
                </div>
              </div>
            </ng-container>
          </div>

          <div class="fv-row mb-8">
            <label class="form-label fs-6 fw-bolder text-gray-900">Username</label>
            <input class="form-control bg-transparent" type="text" name="username" formControlName="username" autocomplete="off"
                [ngClass]="{
                'is-invalid': form.controls['username'].invalid,
                'is-valid': form.controls['username'].valid
              }" />
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'required',
                message: 'Username is required',
                control: form.controls['username']
              }"></ng-container>
        </div>

        <div class="fv-row mb-8">
            <label class="form-label fs-6 fw-bolder text-gray-900">Phone</label>
            <input class="form-control bg-transparent" type="tel" name="phone" formControlName="phone" autocomplete="off"
                [ngClass]="{
                'is-invalid': form.controls['phone'].invalid,
                'is-valid': form.controls['phone'].valid
              }" />
            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'required',
                message: 'Phone is required',
                control: form.controls['phone']
              }"></ng-container>
        </div>

        <div class="fv-row mb-8">
            <label class="form-label fs-6 fw-bolder text-gray-900">Role</label>
            <select name="roles" formControlName="roles" autocomplete="off"
              class="form-select form-select-solid form-select-lg fw-bold"
              [ngClass]="{
                'is-invalid': form.controls['roles'].invalid,
                'is-valid': form.controls['roles'].valid
              }"
            >
                <option value="">Select a Role...</option>
                <ng-container *ngFor="let item of roleList">
                    <option value="{{item.id}}">{{item.name}}</option>
                </ng-container>
            </select>

            <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
                validation: 'required',
                message: 'Role is required',
                control: form.controls['roles']
              }"></ng-container>
        </div>

        <div class="fv-row mb-8">
            <label class="form-label fs-6 fw-bolder text-gray-900">Organization</label>
            <select name="organizations" formControlName="organizations" autocomplete="off"
              class="form-select form-select-solid form-select-lg fw-bold"
            >   
                <option value="">Select an Organization...</option>
                <ng-container *ngFor="let item of organizationList">
                    <option value="{{item.id}}">{{item.name}}</option>
                </ng-container>
            </select>
        </div>
    </form>

    <ng-template #formError let-control="control" let-message="message" let-validation="validation">
        <ng-container *ngIf="control.hasError(validation) && (control.dirty || control.touched)">
            <div class="fv-plugins-message-container">
                <span role="alert">
                    {{ message }}
                </span>
            </div>
        </ng-container>
    </ng-template>
</app-modal>